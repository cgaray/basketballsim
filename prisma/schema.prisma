// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Player {
  id                    Int      @id @default(autoincrement())
  name                  String
  position              String
  team                  String?  // Keep for legacy/display, or remove if fully normalized. Let's keep for now but rely on relation.
  season                Int?
  gamesPlayed           Int?
  pointsPerGame         Float?
  reboundsPerGame       Float?
  assistsPerGame        Float?
  stealsPerGame         Float?
  blocksPerGame         Float?
  fieldGoalPercentage   Float?
  threePointPercentage  Float?
  freeThrowPercentage   Float?
  imageUrl              String?
  createdAt             DateTime @default(now())

  // Relations
  teamId                Int?
  Team                  Team?    @relation(fields: [teamId], references: [id])

  @@map("players")
}

model Team {
  id        Int      @id @default(autoincrement())
  name      String
  userId    String?
  createdAt DateTime @default(now())

  // Relations
  players     Player[]
  homeMatches Match[]  @relation("HomeTeam")
  awayMatches Match[]  @relation("AwayTeam")

  @@map("teams")
}

model Match {
  id          Int      @id @default(autoincrement())
  team1Id     Int
  team2Id     Int
  team1Score  Int
  team2Score  Int
  winnerId    Int?
  playByPlay  String?  // JSON string of play-by-play data
  createdAt   DateTime @default(now())

  // Relations
  team1       Team     @relation("HomeTeam", fields: [team1Id], references: [id])
  team2       Team     @relation("AwayTeam", fields: [team2Id], references: [id])

  @@map("matches")
}
